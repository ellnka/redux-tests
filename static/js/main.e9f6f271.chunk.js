(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(30)},25:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(10),i=n.n(s),c=(n(24),n(25),n(1)),o=n(2),u=n(5),l=n(3),m=n(6),d=n(4),p="GAMES_HAS_ERRORED",h="GAMES_IS_LOADING",g="GAMES_FETCH_DATA_SUCCESS",f="GAME_HAS_ERRORED",b="GAME_IS_LOADING",v="GAME_FETCH_DATA_SUCCESS",E="GAME_STARTED",O="GAME_ANSWERED",y="GAME_FINISHED",w="SET_QUESTION",j="GAME_RESET";function _(){return{type:E}}function k(e){return{type:w,question_id:e}}function C(e){return{type:b,isLoading:e}}function A(e){if(e)return function(t){return t(C(!0)),fetch(e,{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8"},redirect:"error"}).then(function(e){if(console.log(e),!e.ok)throw Error(e.statusText);return t(C(!1)),e}).then(function(e){return e.json()}).then(function(e){t(function(e){return console.log(e),{type:v,game:e}}(e))}).catch(function(e){return t({type:f,hasErrored:!0})})}}var I=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"card gameCard p-2"},a.a.createElement("img",{className:"card-img-top",src:"https://meduza.io"+this.props.gameCard.img,alt:this.props.gameCard.title}),a.a.createElement("div",{className:"card-body"},a.a.createElement("h5",{className:"card-title"},a.a.createElement("a",{href:"#",onClick:this._gameOnClickHandler.bind(this)},this.props.gameCard.title)),a.a.createElement("p",{className:"card-text"}," ")))}},{key:"_gameOnClickHandler",value:function(){var e=this.props.gameCard.id.replace("quiz/",""),t="../data/{file_name}.json".replace("{file_name}",e);console.log(t),this.props.gameFetch(t)}}]),t}(r.Component),N=Object(d.b)(function(){return{}},function(e){return{gameFetch:function(t){return e(A(t))}}})(I),S=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return console.log(this.props),a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card-body"},a.a.createElement("h5",{className:"card-title"},this.props.game.title),a.a.createElement("p",{className:"card-text"},this.props.game.second_title),a.a.createElement("button",{className:"btn btn-primary",onClick:this._startOnClickHandler.bind(this)},this.props.game.settings.btn_start_text)))}},{key:"_startOnClickHandler",value:function(){this.props.gameStart(),this.props.setQuestion(0)}}]),t}(r.Component),H=Object(d.b)(function(e){return{game:e.game}},function(e){return{gameStart:function(t){return e(_())},setQuestion:function(t){return e(k(t))}}})(S),Q=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this._getResult();return a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card-body"},a.a.createElement("h5",{className:"card-title"},e.title),a.a.createElement("p",{className:"card-text"},e.subtitle),a.a.createElement("button",{className:"list-group-item list-group-item-action list-group-item-secondary",onClick:this._startOnClickHandler.bind(this)},this.props.game.settings.btn_replay_text),a.a.createElement("button",{className:"list-group-item list-group-item-action list-group-item-secondary",onClick:this._resetOnClickHandler.bind(this)},this.props.game.settings.btn_next_text)))}},{key:"_startOnClickHandler",value:function(){this.props.gameStart(),this.props.setQuestion(0)}},{key:"_resetOnClickHandler",value:function(){this.props.gameReset()}},{key:"_calcCorrectPercent",value:function(){var e=this,t=this.props.answers.filter(function(t){return e.props.game.answers[t].correct});return this.props.answers.length>0?t.length/this.props.answers.length:0}},{key:"_getResult",value:function(){for(var e=this.props.game.result.shares,t=1/e.length,n=this._calcCorrectPercent(),r=0;r<=e.length;r++)if((r+1)*t>=n)return e[r];return{title:"",subtitle:""}}}]),t}(r.Component),x=Object(d.b)(function(e){return{game:e.game,answers:e.gameAnswers}},function(e){return{gameStart:function(t){return e(_())},gameReset:function(t){return e({type:j})},setQuestion:function(t){return e(k(t))}}})(Q),T=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.game.question_ids[this.props.currentQuestionId],t=this.props.game.questions[e],n="",r="";return t.blocks.length>0&&"p"===t.blocks[0].type&&(n=t.blocks[0].data),t.blocks.length>1&&"image"===t.blocks[1].type&&(r="https://meduza.io"+t.blocks[1].data.small_url),a.a.createElement("div",null,r?a.a.createElement("img",{className:"card-img-top img-fluid question-img",src:r,alt:n}):"",a.a.createElement("div",{className:"card-body"},a.a.createElement("p",{className:"card-text",dangerouslySetInnerHTML:{__html:n}})))}}]),t}(r.Component),G=Object(d.b)(function(e){return{game:e.game,currentQuestionId:e.gameCurrentQuestionId}},function(e){return{}})(T),F=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.game.question_ids[this.props.currentQuestionId],n=this.props.game.questions[t].answer_ids,r=this.props.game.answers,s=n.map(function(e){return r[e]});return a.a.createElement("div",null,s.map(function(t){return e._renderAnswerBlock(t)}))}},{key:"_renderAnswerBlock",value:function(e){if(e.comment_blocks&&0!==e.comment_blocks.length){var t=e.comment_blocks[0].type,n=e.comment_blocks[0].data,r=null;"p"===t&&(r=a.a.createElement("div",{className:e.correct?"alert alert-success":"alert alert-danger",dangerouslySetInnerHTML:{__html:n}}));var s="list-group-item list-group-item-action ";return this.props.currentAnswerId===e.id&&this.props.currentAnswerId?this.props.currentAnswerId===e.id&&e.correct?s+="list-group-item-success":this.props.currentAnswerId!==e.id||e.correct||(s+="list-group-item-danger"):s+="list-group-item-secondary",a.a.createElement("div",{key:e.id},a.a.createElement("button",{className:s,id:e.id,onClick:this.props.currentAnswerId?"":this._answerOnClickHandler.bind(this)},e.text),this.props.currentAnswerId===e.id?r:"")}}},{key:"_answerOnClickHandler",value:function(e){console.log(this.props.answers);var t=this.props.answers?this.props.answers:[];this.props.gameAnswer(t,e.target.id)}}]),t}(r.Component),L=Object(d.b)(function(e){return{game:e.game,answers:e.gameAnswers,currentQuestionId:e.gameCurrentQuestionId,currentAnswerId:e.gameCurrentAnswerId}},function(e){return{gameAnswer:function(t,n){return e(function(e,t){return e[e.length]=t,{type:O,answers:e,answer:t}}(t,n))}}})(F),M=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.isStarted||this.props.isFinished?this.props.isFinished?a.a.createElement(x,null):a.a.createElement("div",{className:"card question"},a.a.createElement(G,null),a.a.createElement(L,null),this.props.currentAnswerId?a.a.createElement("button",{className:"btn btn-primary",onClick:this._nextQuestionOnClickHandler.bind(this)},this.props.game.settings.btn_next_text):a.a.createElement("div",null)):a.a.createElement(H,null)}},{key:"_nextQuestionOnClickHandler",value:function(){this.props.game.question_ids.length-1>this.props.currentQuestionId?this.props.setQuestion(this.props.currentQuestionId+1):this.props.gameFinish()}}]),t}(r.Component),R=Object(d.b)(function(e){return{game:e.game,answers:e.gameAnswers,currentQuestionId:e.gameCurrentQuestionId,isStarted:e.gameIsStarted,isFinished:e.gameIsFinished,currentAnswerId:e.gameCurrentAnswerId}},function(e){return{setQuestion:function(t){return e(k(t))},gameFinish:function(){return e({type:y})}}})(M),q=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return console.log(this.props),this.props.game?a.a.createElement(R,null):a.a.createElement("div",{className:"d-flex align-content-start flex-wrap gameCards"},this.props.games.map(function(e){return a.a.createElement(N,{gameCard:e,key:e.id})}))}}]),t}(r.Component),D=Object(d.b)(function(e){return{games:e.games,game:e.game}})(q),z=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"d-flex align-items-center"},a.a.createElement("strong",null,"Loading..."),a.a.createElement("div",{className:"spinner-border ml-auto",role:"status","aria-hidden":"true"}))}}]),t}(r.Component);function B(e){return{type:h,isLoading:e}}function U(e){if(e)return function(t){return t(B(!0)),fetch(e,{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8"},redirect:"error"}).then(function(e){if(!e.ok)throw Error(e.statusText);return t(B(!1)),e}).then(function(e){return e.json()}).then(function(e){var n=e.games;return t(function(e){return{type:g,games:e}}(n))}).catch(function(e){console.log(e),t({type:p,hasErrored:!0})})}}var W=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.gamesFetch("../data/games.json")}},{key:"render",value:function(){return this.props.hasErrored?a.a.createElement("p",null," Ooops... Games cannot be loaded :-( "):this.props.isLoading?a.a.createElement(z,null):a.a.createElement("div",{className:"meduzaApp container"},a.a.createElement(D,{games:this.props.games}))}}]),t}(r.Component),J=Object(d.b)(function(e){return{games:e.games,hasErrored:e.gamesHasErrored,isLoading:e.gamesIsLoading}},function(e){return{gamesFetch:function(t){return e(U(t))}}})(W),P=n(8),$=n(17),K=n(18);var V=Object(P.c)({games:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return t.games;default:return e}},gamesHasErrored:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.hasErrored;default:return e}},gamesIsLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return t.isLoading;default:return e}},game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return t.game;case j:return null;default:return e}},gameAnswers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return t.answers;case E:case j:return[];default:return e}},gameIsStarted:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case E:return!0;case j:return!1;default:return e}},gameCurrentAnswerId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return t.answer||"";case w:return"";default:return e}},gameIsFinished:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case y:return!0;case E:case j:return!1;default:return e}},gameCurrentQuestionId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return t.question_id;case j:return"";default:return e}},gameHasErrored:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.hasErrored;default:return e}},gameIsLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.isLoading;default:return e}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=document.getElementById("root");i.a.render(a.a.createElement(d.a,{store:Object(P.e)(V,Object(P.d)(Object(P.a)($.a,K.logger)))},a.a.createElement(J,null)),X),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,1,2]]]);
//# sourceMappingURL=main.e9f6f271.chunk.js.map